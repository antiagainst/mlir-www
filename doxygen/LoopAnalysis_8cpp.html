<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MLIR: lib/Analysis/LoopAnalysis.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MLIR
   &#160;<span id="projectnumber">11.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a25db018342d3ae6c7e6779086c18378.html">Analysis</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">LoopAnalysis.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="LoopAnalysis_8h_source.html">mlir/Analysis/LoopAnalysis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="AffineAnalysis_8h_source.html">mlir/Analysis/AffineAnalysis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="AffineStructures_8h_source.html">mlir/Analysis/AffineStructures.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="NestedMatcher_8h_source.html">mlir/Analysis/NestedMatcher.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="AffineOps_8h_source.html">mlir/Dialect/AffineOps/AffineOps.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MathExtras_8h_source.html">mlir/Support/MathExtras.h</a>&quot;</code><br />
<code>#include &quot;llvm/ADT/DenseSet.h&quot;</code><br />
<code>#include &quot;llvm/ADT/SmallString.h&quot;</code><br />
<code>#include &lt;type_traits&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for LoopAnalysis.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="LoopAnalysis_8cpp__incl.png" border="0" usemap="#lib_2Analysis_2LoopAnalysis_8cpp" alt=""/></div>
<map name="lib_2Analysis_2LoopAnalysis_8cpp" id="lib_2Analysis_2LoopAnalysis_8cpp">
</map>
</div>
</div>
<p><a href="LoopAnalysis_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a1f4bbf01091a2cdc51675500dc5ea504"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopAnalysis_8cpp.html#a1f4bbf01091a2cdc51675500dc5ea504">VectorizableOpFun</a> = std::function&lt; bool(AffineForOp, <a class="el" href="classmlir_1_1Operation.html">Operation</a> &amp;)&gt;</td></tr>
<tr class="separator:a1f4bbf01091a2cdc51675500dc5ea504"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9cbd207faf6a9645499ca2d950a717d0"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopAnalysis_8cpp.html#a9cbd207faf6a9645499ca2d950a717d0">isAccessIndexInvariant</a> (<a class="el" href="classmlir_1_1Value.html">Value</a> iv, <a class="el" href="classmlir_1_1Value.html">Value</a> index)</td></tr>
<tr class="memdesc:a9cbd207faf6a9645499ca2d950a717d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given an induction variable <code>iv</code> of type AffineForOp and an access <code>index</code> of type index, returns <code>true</code> if <code>index</code> is independent of <code>iv</code> and false otherwise.  <a href="#a9cbd207faf6a9645499ca2d950a717d0">More...</a><br /></td></tr>
<tr class="separator:a9cbd207faf6a9645499ca2d950a717d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3923379276f692594fad1a7a996837c9"><td class="memTemplParams" colspan="2">template&lt;typename LoadOrStoreOp &gt; </td></tr>
<tr class="memitem:a3923379276f692594fad1a7a996837c9"><td class="memTemplItemLeft" align="right" valign="top">static bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="LoopAnalysis_8cpp.html#a3923379276f692594fad1a7a996837c9">isContiguousAccess</a> (<a class="el" href="classmlir_1_1Value.html">Value</a> iv, LoadOrStoreOp memoryOp, int *memRefDim)</td></tr>
<tr class="memdesc:a3923379276f692594fad1a7a996837c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given:  <a href="#a3923379276f692594fad1a7a996837c9">More...</a><br /></td></tr>
<tr class="separator:a3923379276f692594fad1a7a996837c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32951149cc95489e3b34df0de5099725"><td class="memTemplParams" colspan="2">template&lt;typename LoadOrStoreOpPointer &gt; </td></tr>
<tr class="memitem:a32951149cc95489e3b34df0de5099725"><td class="memTemplItemLeft" align="right" valign="top">static bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="LoopAnalysis_8cpp.html#a32951149cc95489e3b34df0de5099725">isVectorElement</a> (LoadOrStoreOpPointer memoryOp)</td></tr>
<tr class="separator:a32951149cc95489e3b34df0de5099725"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82c2666aaafc4bf2f9abcce40189ed15"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopAnalysis_8cpp.html#a82c2666aaafc4bf2f9abcce40189ed15">isVectorizableLoopBodyWithOpCond</a> (AffineForOp loop, <a class="el" href="LoopAnalysis_8cpp.html#a1f4bbf01091a2cdc51675500dc5ea504">VectorizableOpFun</a> isVectorizableOp, <a class="el" href="classmlir_1_1NestedPattern.html">NestedPattern</a> &amp;vectorTransferMatcher)</td></tr>
<tr class="separator:a82c2666aaafc4bf2f9abcce40189ed15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a1f4bbf01091a2cdc51675500dc5ea504"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f4bbf01091a2cdc51675500dc5ea504">&#9670;&nbsp;</a></span>VectorizableOpFun</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="LoopAnalysis_8cpp.html#a1f4bbf01091a2cdc51675500dc5ea504">VectorizableOpFun</a> =  std::function&lt;bool(AffineForOp, <a class="el" href="classmlir_1_1Operation.html">Operation</a> &amp;)&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LoopAnalysis_8cpp_source.html#l00280">280</a> of file <a class="el" href="LoopAnalysis_8cpp_source.html">LoopAnalysis.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9cbd207faf6a9645499ca2d950a717d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cbd207faf6a9645499ca2d950a717d0">&#9670;&nbsp;</a></span>isAccessIndexInvariant()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isAccessIndexInvariant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>iv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given an induction variable <code>iv</code> of type AffineForOp and an access <code>index</code> of type index, returns <code>true</code> if <code>index</code> is independent of <code>iv</code> and false otherwise. </p>
<p>The determination supports composition with at most one AffineApplyOp. The 'at most one AffineApplyOp' comes from the fact that the composition of AffineApplyOp needs to be canonicalized by construction to avoid writing code that composes arbitrary numbers of AffineApplyOps everywhere. To achieve this, at the very least, the compose-affine-apply pass must have been run.</p>
<p>Prerequisites:</p><ol type="1">
<li><code>iv</code> and <code>index</code> of the proper type;</li>
<li>at most one reachable AffineApplyOp from index;</li>
</ol>
<p>Returns false in cases with more than one AffineApplyOp, this is conservative. </p>

<p class="definition">Definition at line <a class="el" href="LoopAnalysis_8cpp_source.html#l00167">167</a> of file <a class="el" href="LoopAnalysis_8cpp_source.html">LoopAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="AffineAnalysis_8cpp_source.html#l00041">mlir::getReachableAffineApplyOps()</a>, <a class="el" href="Value_8cpp_source.html#l00034">mlir::Value::getType()</a>, <a class="el" href="Types_8h_source.html#l00254">mlir::Type::isa()</a>, <a class="el" href="AffineOps_8cpp_source.html#l01566">mlir::isForInductionVar()</a>, and <a class="el" href="AffineStructures_8cpp_source.html#l00275">mlir::AffineValueMap::isFunctionOf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="LoopAnalysis_8cpp_source.html#l00191">mlir::getInvariantAccesses()</a>, and <a class="el" href="LoopAnalysis_8cpp_source.html#l00222">isContiguousAccess()</a>.</p>

</div>
</div>
<a id="a3923379276f692594fad1a7a996837c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3923379276f692594fad1a7a996837c9">&#9670;&nbsp;</a></span>isContiguousAccess()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename LoadOrStoreOp &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isContiguousAccess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>iv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LoadOrStoreOp&#160;</td>
          <td class="paramname"><em>memoryOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>memRefDim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given: </p>
<ol type="1">
<li>an induction variable <code>iv</code> of type AffineForOp;</li>
<li>a <code>memoryOp</code> of type const LoadOp&amp; or const StoreOp&amp;; determines whether <code>memoryOp</code> has a contiguous access along <code>iv</code>. Contiguous is defined as either invariant or varying only along a unique MemRef dim. Upon success, the unique MemRef dim is written in <code>memRefDim</code> (or -1 to convey the memRef access is invariant along <code>iv</code>).</li>
</ol>
<p>Prerequisites:</p><ol type="1">
<li><code>memRefDim</code> ~= nullptr;</li>
<li><code>iv</code> of the proper type;</li>
<li>the MemRef accessed by <code>memoryOp</code> has no layout map or at most an identity layout map.</li>
</ol>
<p>Currently only supports no layoutMap or identity layoutMap in the MemRef. Returns false if the MemRef has a non-identity layoutMap or more than 1 layoutMap. This is conservative. </p>

<p class="definition">Definition at line <a class="el" href="LoopAnalysis_8cpp_source.html#l00222">222</a> of file <a class="el" href="LoopAnalysis_8cpp_source.html">LoopAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="AffineExpr_8h_source.html#l00233">mlir::AffineExpr::dyn_cast()</a>, and <a class="el" href="LoopAnalysis_8cpp_source.html#l00167">isAccessIndexInvariant()</a>.</p>

<p class="reference">Referenced by <a class="el" href="LoopAnalysis_8cpp_source.html#l00334">mlir::isVectorizableLoopBody()</a>.</p>

</div>
</div>
<a id="a32951149cc95489e3b34df0de5099725"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32951149cc95489e3b34df0de5099725">&#9670;&nbsp;</a></span>isVectorElement()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename LoadOrStoreOpPointer &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isVectorElement </td>
          <td>(</td>
          <td class="paramtype">LoadOrStoreOpPointer&#160;</td>
          <td class="paramname"><em>memoryOp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LoopAnalysis_8cpp_source.html#l00275">275</a> of file <a class="el" href="LoopAnalysis_8cpp_source.html">LoopAnalysis.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LoopAnalysis_8cpp_source.html#l00283">isVectorizableLoopBodyWithOpCond()</a>.</p>

</div>
</div>
<a id="a82c2666aaafc4bf2f9abcce40189ed15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82c2666aaafc4bf2f9abcce40189ed15">&#9670;&nbsp;</a></span>isVectorizableLoopBodyWithOpCond()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isVectorizableLoopBodyWithOpCond </td>
          <td>(</td>
          <td class="paramtype">AffineForOp&#160;</td>
          <td class="paramname"><em>loop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="LoopAnalysis_8cpp.html#a1f4bbf01091a2cdc51675500dc5ea504">VectorizableOpFun</a>&#160;</td>
          <td class="paramname"><em>isVectorizableOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1NestedPattern.html">NestedPattern</a> &amp;&#160;</td>
          <td class="paramname"><em>vectorTransferMatcher</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LoopAnalysis_8cpp_source.html#l00283">283</a> of file <a class="el" href="LoopAnalysis_8cpp_source.html">LoopAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="Operation_8h_source.html#l00362">mlir::Operation::getNumRegions()</a>, <a class="el" href="NestedMatcher_8cpp_source.html#l00115">mlir::matcher::If()</a>, <a class="el" href="NestedMatcher_8cpp_source.html#l00147">mlir::matcher::isLoadOrStore()</a>, <a class="el" href="LoopAnalysis_8cpp_source.html#l00275">isVectorElement()</a>, <a class="el" href="NestedMatcher_8h_source.html#l00100">mlir::NestedPattern::match()</a>, and <a class="el" href="NestedMatcher_8cpp_source.html#l00111">mlir::matcher::Op()</a>.</p>

<p class="reference">Referenced by <a class="el" href="LoopAnalysis_8cpp_source.html#l00334">mlir::isVectorizableLoopBody()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jan 28 2020 00:23:12 for MLIR by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
